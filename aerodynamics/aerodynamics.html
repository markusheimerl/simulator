<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>A formalization of co-axial rotored aerodynamics</title>
    <link rel="stylesheet" href="/lib/pubcss-ieee.css" />
    <style>
      .katex-display {
        overflow-x: auto;
        overflow-y: hidden;
      }

      @media screen and (max-width: 767px) {
        body {
          column-count: 1;
        }

        .col-span {
          column-span: none;
        }
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
      integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
      integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
      integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body);"
    ></script>
  </head>

  <body>
    <header class="col-span">
      <h1 class="title counter-skip">
        A formalization of co-axial rotored aerodynamics
      </h1>
      <div class="authors">
        <div class="author">
          <div>Markus Heimerl</div>
          <div>Ratisbon Robotics</div>
          <div>Regensburg, Germany</div>
          <div>markusheimerl@ratisbonrobotics.com</div>
        </div>
      </div>
    </header>

    <div class="abstract">
      <p>
        <em>Abstract</em> — The emergence of drones, especially those with
        co-axial rotors, has transformed various industries, from logistics to
        emergency response. Co-axial drones offer unique advantages, such as
        enhanced stability and maneuverability, but their complex aerodynamics
        pose significant challenges for design and control. In this paper, we
        present a comprehensive mathematical model of co-axial drone flight
        dynamics, synthesizing concepts from fluid dynamics, aerodynamics, and
        robotics. Our model captures the drone's spatial dynamics, state
        representation, and time evolution, with a special focus on the
        intricate interactions between the paired rotors, the fuselage, and the
        surrounding air. We derive the equations of motion from first
        principles, grounding our approach in classical physics and modern
        aerodynamic theories. The model provides a detailed description of the
        forces and torques acting on the drone, and how they influence its
        motion in three dimensions. We validate the model through extensive
        simulations and discuss its implications for drone design and control.
        Our framework aims to provide a solid theoretical foundation for the
        development of advanced co-axial drones, enabling expanded flight
        envelopes, autonomous operation in complex environments, and novel
        applications. By deepening our understanding of co-axial drone
        aerodynamics, we hope to accelerate progress in this transformative
        technology and unlock its full potential for shaping the future of
        aerial robotics.
      </p>
      <p>
        <em>Keywords</em> — Co-axial rotors, drone aerodynamics, flight
        dynamics, state-space models, fluid dynamics, robotics
      </p>
    </div>

    <h1>Introduction</h1>
    <section>
      <p>
        Co-axial drones have emerged as a promising platform for aerial
        robotics, offering unique capabilities compared to traditional
        single-rotor designs. However, their complex aerodynamics pose
        challenges for modeling and control. In this paper, we present a
        comprehensive mathematical framework for co-axial drone flight dynamics,
        grounded in physics and aerodynamics. Our model captures the drone's
        spatial dynamics, state representation, and time evolution, with a focus
        on rotor-fuselage interactions. Through simulations and analysis, we
        explore the implications for drone design and control, aiming to
        accelerate progress in this transformative technology.
      </p>
    </section>

    <h1>Spatial Dynamics</h1>
    <section>
      <h2>State Representation</h2>
      <p>
        The vector-valued function, \(\mathbf{X}(t)\), entirely describes the
        drone's state at a point in time.
      </p>
      <!-- prettier-ignore -->
      <div class="equation">
        \[
          \mathbf{X} : \mathbb{R}^{12} \to \mathbb{R}^{12}, \mathbf{X}_i : \mathbb{R} \to \mathbb{R} \\
          \mathbf{X}(t) =
          \begin{bmatrix}
            x(t),
            y(t),
            z(t),
            \phi(t),
            \theta(t),
            \psi(t),
            x'(t),
            y'(t),
            z'(t),
            \phi_{\cdot}'(t),
            \theta_{\cdot}'(t),
            \psi_{\cdot}'(t)
          \end{bmatrix}
        \]
      </div>
      <p>
        where \(x(t), y(t), z(t)\) denote the drone's positional coordinates in
        space, \(\phi(t), \theta(t), \psi(t)\) stand for rotational angles
        around the \(x\), \(y\) and \(z\)-axes, and \(x'(t), y'(t), z'(t)\)
        represent linear velocities, i.e. the first derivative of the position,
        along the \(x\), \(y\) and \(z\)-axes. The rotational velocities within
        the drone's frame of reference are denoted by \(\phi_{\cdot}'(t),
        \theta_{\cdot}'(t), \psi_{\cdot}'(t)\).
      </p>

      <figure>
        <div style="border: 1px solid #000; margin-top: 6px; overflow: hidden">
          <img
            src="3d_system.svg"
            alt="Three-dimensional coordinate system, illustrating axis and rotational angles in space"
            style="
              max-width: 100%;
              max-height: 100%;
              display: block;
              margin: auto;
            "
          />
        </div>
        <figcaption>
          Three-dimensional coordinate system, illustrating axis and rotational
          angles in space
        </figcaption>
      </figure>

      <p>
        A counterclockwise rotation of any vector around the \(x\), \(y\) or
        \(z\)-axis by some angle \(\alpha\) is done through multiplying it from
        the right to \(R_x(\alpha)\), \(R_y(\alpha)\) or \(R_z(\alpha)\).
      </p>
      <!-- prettier-ignore -->
      <div class="equation">
        \[
        \begin{array}{cc}
        R_x(\alpha) =
        \begin{bmatrix}
        1 & 0 & 0 \\
        0 & \cos(\alpha) & -\sin(\alpha) \\
        0 & \sin(\alpha) & \cos(\alpha) \\
        \end{bmatrix} &
        R_y(\alpha) =
        \begin{bmatrix}
        \cos(\alpha) & 0 & \sin(\alpha) \\
        0 & 1 & 0 \\
        -\sin(\alpha) & 0 & \cos(\alpha) \\
        \end{bmatrix}
        \end{array}
        \]
        \[
        R_z(\alpha) =
        \begin{bmatrix}
        \cos(\alpha) & -\sin(\alpha) & 0 \\
        \sin(\alpha) & \cos(\alpha) & 0 \\
        0 & 0 & 1 \\
        \end{bmatrix}
        \]              
      </div>
      <h2>Dynamics Formulation</h2>
      <p>
        The dynamics of the drone are characterized by how its state
        (\(\mathbf{X}(t)\)) evolves through time under the influence of forces.
        The thrusts (\(F_{i\cdot}(t)\)) and moments (\(M_{i\cdot}(t)\)) follow a
        quadratic relationship with rotor velocities (\(\omega_{i\cdot}(t)\)),
        which is derived from the principles of fluid dynamics.
      </p>
      <div class="equation">
        \[ F_{i\cdot}(t) = k_{f} (\omega_{i\cdot}(t))^2 \qquad M_{i\cdot}(t) =
        k_{m} (\omega_{i\cdot}(t))^2 \]
      </div>
      <p>
        Changes in the drone's position
        <a style="white-space: nowrap">(\(x(t), y(t), z(t)\))</a>
        are derived from the integration of velocities
        <a style="white-space: nowrap">(\(x'(t), y'(t), z'(t)\))</a>, which in
        turn stem from the integration of accelerations
        <a style="white-space: nowrap">(\(x''(t), y''(t), z''(t)\))</a>, i.e.
        the second derivative of the position. These accelerations are
        calculated using Newton's second law of motion
        <a href="#newton1687">2</a>, with \(g\) being earth's gravitational
        constant \( 9.81 \frac{m}{s^2} \). Through rotating the vector of linear
        acceleration from within the drone's frame of reference by the angles
        \(\phi(t), \theta(t), \psi(t)\), we obtain the vector of linear
        acceleration in the world's frame of reference.
      </p>
      <!-- prettier-ignore -->
      <div class="equation">
        \[
        \begin{align*}
          \begin{bmatrix}
            x''(t) \\
            y''(t) \\
            z''(t)
          \end{bmatrix} &=
          \left(
          \left(
          R_x(\phi(t))
          R_y(\theta(t))
          R_z(\psi(t))\right)^T
          \begin{bmatrix}
            0 \\
            \frac{1}{m}\sum_i^4 F_{i\cdot}(t) \\
            0
          \end{bmatrix}
          \right)
          + 
          \begin{bmatrix}
            0 \\
            -g \\
            0
          \end{bmatrix}
        \end{align*}
        \]        
      </div>

      <figure>
        <div style="border: 1px solid #000; margin-top: 6px; overflow: hidden">
          <img
            src="3d_drone.svg"
            alt="Drone at \(X = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\). The drone's and
            the world's frame of reference are perfectly aligned."
            style="
              max-width: 100%;
              max-height: 100%;
              display: block;
              margin: auto;
            "
          />
        </div>
        <figcaption>
          Drone at \(\mathbf{X}(0) = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\). The
          drone's and the world's frame of reference are perfectly aligned.
        </figcaption>
      </figure>

      We define the torques within the drones frame of reference according to
      the principles of Archimedes <a href="#archimedes250bc">3</a>.
      <!-- prettier-ignore -->
      <div class="equation">
        \[
        \begin{align*}
          \tau_{x\cdot}(t) &= -l \cdot (F_{3\cdot}(t) + F_{4\cdot}(t) - F_{2\cdot}(t) - F_{1\cdot}(t)) \\
          \tau_{y\cdot}(t) &= -(M_{1\cdot}(t) + M_{3\cdot}(t) - M_{2\cdot}(t) - M_{4\cdot}(t)) \\
          \tau_{z\cdot}(t) &= -l \cdot (F_{2\cdot}(t) + F_{3\cdot}(t) - F_{1\cdot}(t) - F_{4\cdot}(t))
        \end{align*}
        \]
      </div>

      <p>
        By rearranging Euler's equations of rotation
        <a href="#euler1768">1</a> we obtain the angular acceleration within the
        drone's frame of reference.
      </p>

      <!-- prettier-ignore -->
      <div class="equation">
        \[
        \begin{align*}
          \begin{bmatrix}
            \tau_{x\cdot}(t) \\
            \tau_{y\cdot}(t) \\
            \tau_{z\cdot}(t)
          \end{bmatrix} &=
          \begin{bmatrix}
            I_{x\cdot} & 0 & 0 \\
            0 & I_{y\cdot} & 0 \\
            0 & 0 & I_{z\cdot}
          \end{bmatrix}
          \begin{bmatrix}
            \phi_{\cdot}''(t) \\
            \theta_{\cdot}''(t) \\
            \psi_{\cdot}''(t)
          \end{bmatrix}
          +
          \begin{bmatrix}
            \phi_{\cdot}'(t) \\
            \theta_{\cdot}'(t) \\
            \psi_{\cdot}'(t)
          \end{bmatrix}
          \times
          \left(
            \begin{bmatrix}
              I_{x\cdot} & 0 & 0 \\
              0 & I_{y\cdot} & 0 \\
              0 & 0 & I_{z\cdot}
            \end{bmatrix}
            \begin{bmatrix}
              \phi_{\cdot}'(t) \\
              \theta_{\cdot}'(t) \\
              \psi_{\cdot}'(t)
            \end{bmatrix}
          \right) \\
          \begin{bmatrix} 
          \phi_{\cdot}''(t) \\
          \theta_{\cdot}''(t) \\
          \psi_{\cdot}''(t)
          \end{bmatrix} &=
          \begin{bmatrix} 
            \frac{1}{I_{x\cdot}} & 0 & 0 \\ 
            0 & \frac{1}{I_{y\cdot}} & 0 \\ 
            0 & 0 & \frac{1}{I_{z\cdot}} 
          \end{bmatrix}
          \left( 
            \begin{bmatrix} 
              \tau_{x\cdot}(t) \\
              \tau_{y\cdot}(t) \\
              \tau_{z\cdot}(t)
            \end{bmatrix} - 
            \begin{bmatrix} 
              \phi_{\cdot}'(t) \\
              \theta_{\cdot}'(t) \\
              \psi_{\cdot}'(t)
            \end{bmatrix} \times 
            \left( 
              \begin{bmatrix} 
                I_{x\cdot} & 0 & 0 \\ 
                0 & I_{y\cdot} & 0 \\ 
                0 & 0 & I_{z\cdot} 
              \end{bmatrix} 
              \begin{bmatrix} 
                \phi_{\cdot}'(t) \\
                \theta_{\cdot}'(t) \\
                \psi_{\cdot}'(t)
              \end{bmatrix} 
            \right) 
          \right)
        \end{align*}
      \]
      </div>
      <p>
        We now need to express the angular velocities in the world's frame of
        reference.
      </p>
      <!-- prettier-ignore -->
      <div class="equation">
        \[
        \begin{align*}
          \begin{bmatrix}
            \phi'(t) \\
            \theta'(t) \\
            \psi'(t)
          \end{bmatrix}
          &= 
          \left(
            R_x(\phi)
            R_y(\theta)
            R_z(\psi)\right)^T
          \begin{bmatrix}
            \phi_{\cdot}'(t) \\
            \theta_{\cdot}'(t) \\
            \psi_{\cdot}'(t)
          \end{bmatrix}
        \end{align*}
        \]
      </div>

      <h2>State Evolution</h2>
      <p>
        The state of the drone at time \( t_2 \) is determined by the sum of its
        current state \( \mathbf{X}(t_1) \) and the integral of the state's time
        derivative \( \mathbf{X}'(t_1) \) over the interval \( t_2 - t_1 \).
        This integral represents a precise calculation of the state change.
        However, for small intervals, we assume a constant rate of change,
        simplifying the integral to a product.
      </p>
      <div class="equation">
        \[ \mathbf{X}(t_2) = \mathbf{X}(t_1) + \int_{t_1}^{t_2} \mathbf{X}'(t)
        dt \approx \mathbf{X}(t_1) + (t_2 - t_1)\mathbf{X}'(t_1) \]
      </div>
    </section>

    <h5 class="references">References</h5>
    <div class="references">
      <cite id="euler1768">
        <a
          href="https://archive.org/details/leonhardieuleri05eulegoog/page/n6/mode/2up?view=theater"
          >Euler, L. (1770). Institutiones calculi integralis</a
        >
      </cite>
      <cite id="newton1687">
        <a
          href="https://archive.org/details/philosophiaenatu00newt_0/page/n9/mode/2up?view=theater"
          >Newton, I. (1687). Philosopsiæ Naturalis Principia Mathematica
        </a>
      </cite>
      <cite id="archimedes250bc">
        <a
          href="https://archive.org/details/worksofarchimede00arch/page/n15/mode/2up?view=theater"
          >Archimedes (ca. 250 BC). Περὶ ἐπιπέδων ἰσορροπιῶν
        </a>
      </cite>
    </div>
  </body>
</html>
