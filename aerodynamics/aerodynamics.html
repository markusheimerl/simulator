<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>A formalization of co-axial rotored aerodynamics</title>
    <link rel="stylesheet" href="pubcss-ieee.css" />
    <style>
      .katex-display {
        overflow-x: auto;
        overflow-y: hidden;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
      integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
      integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
      integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body);"
    ></script>
  </head>

  <body>
    <header class="col-span">
      <h1 class="title counter-skip">
        A formalization of co-axial rotored aerodynamics
      </h1>
      <div class="authors">
        <div class="author">
          <div>Markus Heimerl</div>
          <div>Ratisbon Robotics</div>
          <div>Regensburg, Germany</div>
          <div>markusheimerl@ratisbonrobotics.com</div>
        </div>
      </div>
    </header>

    <div class="abstract">
      <p>
        <em>Abstract</em>—This work presents a formalization of co-axial dual
        and quad rotor aerodynamic principles, integral branches of fluid
        dynamics. This effort aims to establish a solid theoretical foundation
        for aeronautics and related disciplines.
      </p>
      <p>
        <em>Keywords</em>—drone dynamics, formalization, 2D and 3D frameworks,
        aerodynamic principles, theoretical modeling, fluid dynamics, thrust
        dynamics, rotational mechanics, mathematical representation.
      </p>
    </div>

    <h1>Introduction</h1>
    <section>
      <p>
        The objective of this work is to formalize the principles of co-axial
        dual and quad rotor aerodynamics, a specialized area within fluid
        dynamics. Co-axial rotors refer to systems where multiple rotors are
        aligned along the same rotational axis, commonly facing in the same
        direction. This formalization provides a foundational basis for
        practical applications in aeronautics, specifically in the design and
        operation of airborne vehicles. In this context, "drone" refers to both
        dual and quad rotor systems, where dual rotor implies a system with two
        rotating propellers and quad rotor denotes a system with four.
      </p>
    </section>

    <h1>Planar Dynamics</h1>
    <section>
      <h2>State Representation</h2>
      <p>
        A simulation is considered comprehensive if it can predict the drone's
        state \(X\) for subsequent discrete time intervals.
      </p>
      <div class="equation">
        \( X = [x, y, \psi, \dot{x}, \dot{y}, \dot{\psi}] \)
      </div>
      <p>
        Here, \(X\) encapsulates the drone's coordinates (\(x, y\)), rotational
        angle (\(\psi\)), and their corresponding velocities
        <span style="white-space: nowrap"
          >(\(\dot{x}, \dot{y}, \dot{\psi}\))</span
        >. The thrust forces (\(F_{1}\) and \(F_{2}\)) from the rotors, combined
        with environmental factors, result in the alteration of the state vector
        \(X\). The thrusts \(F_{1}\) and \(F_{2}\) are angled relative to the
        y-axis by \(\psi\).
      </p>
      <figure>
        <div style="border: 1px solid #000; margin-top: 6px; overflow: hidden">
          <img
            src="2d_drone.svg"
            alt="Two-dimensional drone"
            style="
              max-width: 100%;
              max-height: 100%;
              display: block;
              margin: auto;
            "
          />
        </div>
        <figcaption>
          Two-dimensional schematic representation of a drone, with units
          detailed in brackets.
        </figcaption>
      </figure>
      <h2>Dynamics Formulation</h2>
      <p>
        The dynamics of the drone are characterized by how its state \(X\)
        evolves under the influence of forces \(F_{1}\) and \(F_{2}\). These
        forces, as a function of rotor velocities (\(\omega_{1}, \omega_{2}\)),
        follow a relationship with thrust, denoted by \(k_{f}\), that is derived
        from the principles of fluid dynamics and aerodynamics. These
        disciplines, building upon Newton's Laws of
        <span style="white-space: nowrap"
          >Motion <a href="#newton1687">2</a></span
        >, specifically address the interaction between the rotors and the
        surrounding air. The force generated by the rotors is proportional to
        the square of their velocity.
      </p>
      <div class="equation">\( F_{i} = k_{f} \omega_{i}^2 \)</div>
      <p>
        The thrust components \(F_{x}\) and \(F_{y}\), acting along the x-axis
        and y-axis respectively, are determined by trigonometric relationships,
        based on principles established in Euclid's work
        <a href="#euclid300bc">4</a>, derived from the total thrust force in the
        plane
        <span style="white-space: nowrap"
          >(\(F_{total} = F_1 + F_2 = F_{xy}\))</span
        >
        and the angle of orientation (\(\psi\)).
      </p>
      <div class="equation">
        \[ F_{x} = \sin(\psi)F_{xy} \qquad F_{y} = \cos(\psi)F_{xy} \]
      </div>

      <figure>
        <div style="border: 1px solid #000; margin-top: 6px; overflow: hidden">
          <img
            src="2d_drone_forces.svg"
            alt="Forces on a 2D drone"
            style="
              max-width: 100%;
              max-height: 100%;
              display: block;
              margin: auto;
            "
          />
        </div>
        <figcaption>Forces acting on a two-dimensional drone.</figcaption>
      </figure>
      <p>
        Changes in the drone's position (\(x, y\)) are derived from the
        integration of velocities (\(\dot{x}, \dot{y}\)), which in turn stem
        from the integration of accelerations (\(\ddot{x}, \ddot{y}\)). These
        accelerations are calculated using Newton's second law
        <span style="white-space: nowrap">(\(F = ma\))</span>
        <a href="#newton1687">2</a> and the gravitational force (\(F_{g} =
        mg\)), with \(g\) being earth's gravitational constant \( 9.81
        \frac{m}{s^2} \).
      </p>
      <div class="equation">
        \[ \ddot{x} = \frac{F_{x}}{m} \qquad \ddot{y} = \frac{(F_{y} -
        F_{g})}{m} = \frac{F_{y}}{m} - g \]
      </div>
      <p>
        Changes in the drone's orientation (\(\psi\)) are derived in the same
        fashion, by integrating twice over the angular acceleration
        (\(\ddot{\psi}\)). Determining \(\ddot{\psi}\) requires the
        consideration of the concept of torque (\(\tau = L \cdot F \cdot
        sin(\kappa)\)) formalized by Archimedes
        <a href="#archimedes250bc">3</a>. Torque is a measure of the turning
        effect of a force applied at some angle (\(\kappa\)), at a distance
        (\(L\)) from an axis of rotation. Convention dictates that torque is
        positive when turning counterclockwise and negative when turning
        clockwise. The angular acceleration (\(\ddot{\psi}\)) is related to
        torque according to Newton's second law <a href="#newton1687">2</a>. The
        radial mass distribution of the drone, or moment of inertia
        (\(I_{\psi}\)) i.e. the drones resistance to angular acceleration, times
        the angular acceleration (\(\ddot{\psi}\)) gives the torque (\(\tau\))
        aswell.
      </p>
      <div class="equation">
        \[ \begin{alignat*}{2} \tau_1 &= L \cdot F_1 \cdot sin(90°) \qquad &
        \tau_{\psi} = I_{\psi}\ddot{\psi} \\ \tau_2 &= L \cdot F_2 \cdot
        sin(90°) \qquad & L(F_2 - F_1) = I_{\psi}\ddot{\psi} \\ \tau_{\psi} &=
        \tau_2 - \tau_1 = L(F_2 - F_1) \qquad & \ddot{\psi} = \frac{L(F_2 -
        F_1)}{I_{\psi}} \end{alignat*} \]
      </div>

      <h2>State Evolution</h2>
      <p>
        The state of the drone at time \( t + \Delta t \) is determined by the
        sum of its current state \( X_t \) and the integral of the state's time
        derivative \( \dot{X} \) over the interval \( \Delta t \). This integral
        represents a precise calculation of the state change. However, for
        computational simplicity, we often use an approximation method developed
        by Leonhard Euler <a href="#euler1768">1</a>. His method approximates
        the future state by assuming a constant rate of change (\( \dot{X}_t \))
        over a small interval
        <span style="white-space: nowrap">(\( \Delta t \approx 0.01\))</span>,
        simplifying the integral to a product of the rate of change and the time
        interval.
      </p>
      <div class="equation">
        \[ X_{t + \Delta t} = X_{t} + \int_{t}^{t+\Delta t} \dot{X}_{\tau} d\tau
        \approx X_t + \Delta t\dot{X}_t \]
      </div>

      <p>
        To thoroughly describe the time evolution of the drone's state, we
        substitude the explicit expressions for the accelerations \(\ddot{x}\),
        \(\ddot{y}\), and \(\ddot{\psi}\) into the equation for \( X_{t + \Delta
        t} \). These accelerations are directly derived from the drone's
        dynamics, which include the influence of forces and torques resulting
        from the rotor speeds and earth's gravity.
      </p>
      <div class="equation">
        \[ X_{t + \Delta t} \approx X_t + \Delta t \dot{X}_t= \begin{bmatrix} x
        \\ y \\ \psi \\ \dot{x} \\ \dot{y} \\ \dot{\psi} \end{bmatrix}_t +
        \Delta t \begin{bmatrix} \dot{x} \\ \dot{y} \\ \dot{\psi} \\ \ddot{x} \\
        \ddot{y} \\ \ddot{\psi} \end{bmatrix}_t = \begin{bmatrix} x \\ y \\ \psi
        \\ \dot{x} \\ \dot{y} \\ \dot{\psi} \end{bmatrix}_t + \begin{bmatrix}
        \Delta t\dot{x} \\ \Delta t\dot{y} \\ \Delta t\dot{\psi} \\ \frac{\Delta
        t\sin(\psi)k_f(\omega_1^2 + \omega_2^2)}{m} \\ \Delta t(g -
        \frac{\cos(\psi)k_f(\omega_1^2 + \omega_2^2)}{m}) \\ \frac{\Delta
        tLk_f(\omega_2^2 - \omega_1^2)}{I_{\psi}} \end{bmatrix}_t \]
      </div>
      <h2>Mechanical Constants</h2>
      <p>
        To determine \(I_{\psi}\), we consider the drone's geometry and mass
        distribution through the formula,
        <span style="white-space: nowrap">\(I_{\psi} = \sum_i(m_i r_i^2)\)</span
        >, where the masses (\(m_i\)) of small segments at different radii
        (\(r_i\)) from the center are summed. For continuous bodies, this
        summation transforms into an integral, taking into account the
        continuous radial mass distribution.
      </p>
      <p>
        The calculation of the thrust coefficient (\(k_f\)) is influenced by
        both physical and operational specifics of the rotor. The rotor's design
        parameters such as the size, arrangement, and the number of blades have
        a significant impact on \(k_f\). Crucially, the individual rotor blades
        are typically curved and tilted to create an airfoil shape, which moves
        air downwards (Imagine holding your hand out of a moving car's window at
        a tilt.). The magnitude of the generated thrust varies with rotor speed,
        and by investigating this via computational fluid dynamics simulations,
        a mathematical correlation can be constructed.
      </p>
    </section>

    <h1>Spatial Dynamics</h1>
    <section>
      <h2>State Representation</h2>
      <p>
        The three-dimensional state vector, \(X\), extends the two-dimensional
        model by integrating additional spatial and rotational parameters.
      </p>
      <div class="equation">
        \( X = [x, y, z, \theta, \phi, \psi, \dot{x}, \dot{y}, \dot{z},
        \dot{\alpha}, \dot{\beta}, \dot{\gamma}] \)
      </div>
      <p>where</p>
      <ul>
        <li>\(x, y, z\) denote the drone's positional coordinates in space,</li>
        <li>
          \(\dot{x}, \dot{y}, \dot{z}\) represent linear velocities along the x,
          y, and z axes,
        </li>
        <li>
          \(\theta, \phi, \psi\) stand for rotational angles around the x, y,
          and z axes,
        </li>
        <li>
          \(\dot{\alpha}, \dot{\beta}, \dot{\gamma}\) indicate rotational
          velocities inside the drones frame of reference.
        </li>
      </ul>

      <figure>
        <div style="border: 1px solid #000; margin-top: 6px; overflow: hidden">
          <img
            src="3d_drone.svg"
            alt="Three-dimensional state representation of a drone, illustrating positional coordinates and rotational angles in space"
            style="
              max-width: 100%;
              max-height: 100%;
              display: block;
              margin: auto;
            "
          />
        </div>
        <figcaption>
          Three-dimensional state representation of a drone, illustrating
          positional coordinates and rotational angles in space.
        </figcaption>
      </figure>

      <h2>Dynamics Formulation</h2>
      <p>
        Extending to three dimensions, we maintain the relationship between
        rotor speeds (\(\omega_{i}\)) and thrust (\(F_{i}\)) as well as the
        cumulative thrust (\(F_{total}\)) from all four rotors.
      </p>
      <div class="equation">
        \[ F_{i} = k_{f} \omega_{i}^2 \qquad F_{total} = \sum_i F_i = F_1 + F_2
        + F_3 + F_4 \]
      </div>
      <p>
        To determine the contribution of \( F_{total} \) on the \( xy \)-plane,
        it is necessary to acknowledge that some of the force from \( F_{total}
        \) is distributed in another plane. For this analysis, consider a
        triangle emerging from the drawing scene. This triangle comprises three
        points: the first, located at the center of the drone, is denoted as \(
        A \); the second, situated at the tip of \( F_{total} \) in space, is
        labeled \( B \); and the third, positioned at the tip of \( F_{xy} \),
        is identified as \( C \). The angle at point \( C \) is a right angle,
        while the angle at point \( A \) is \( \theta \). The length of the
        hypotenuse, corresponding to the magnitude of \( F_{total} \), is known.
        To ascertain the length of \( F_{xy} \), one must consider \(
        \cos(\theta) \). Similarly, for the \( xz \)-plane, another triangle can
        be visualized. Again, the first point \( A \) is at the center of the
        drone. The second point \( B \) is at the tip of \( F_{total} \), and
        the third point \( C \) is at the apex of \( F_{xz} \). In this
        scenario, the angle at \( C \) is a right angle, and the angle at \( A
        \) is \( \psi \), indicating that \( F_{xz} \) must be \( \cos(\psi) \).
        Continuing with this logic, for the \( yz \)-plane, \( F_{yz} \) must be
        \( \cos(\phi) \), following the same method of analysis. This train of
        thought can then be continued to determine the individual forces \(
        F_{x} \), \( F_{y} \), and \( F_{z} \) from \( F_{xy} \), \( F_{xz} \),
        and \( F_{yz} \), respectively.
      </p>

      <div class="equation">
        \[ \begin{alignat*}{2} F_{xz} &= \cos(\psi) F_{total} \qquad & F_{x} &=
        \cos(\phi)F_{xz} \\ F_{xy} &= \cos(\theta) F_{total} \qquad & F_{y} &=
        \cos(\psi)F_{xy} \\ F_{yz} &= \cos(\phi) F_{total} \qquad & F_{z} &=
        \cos(\theta)F_{yz} \end{alignat*} \]
      </div>

      <p>
        Furthermore we maintain the derivation of accelerations along the global
        axis.
      </p>

      <div class="equation">
        \[ \ddot{x} = \frac{F_{x}}{m} \qquad \ddot{y} = \frac{(F_{y} -
        F_{g})}{m} = \frac{F_{y}}{m} - g \qquad \ddot{z} = \frac{F_{z}}{m}\]
      </div>

      <figure>
        <div style="border: 1px solid #000; margin-top: 6px; overflow: hidden">
          <img
            src="3d_drone_at_rest.svg"
            alt="Drone at \(X = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\)."
            style="
              max-width: 100%;
              max-height: 100%;
              display: block;
              margin: auto;
            "
          />
        </div>
        <figcaption>
          Drone at \(X = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\).
        </figcaption>
      </figure>

      <!-- prettier-ignore -->
      <div class="equation">
        \[
          \begin{align*}
            \begin{bmatrix}
            \tau_{\alpha} \\
            \tau_{\beta} \\
            \tau_{\gamma}
            \end{bmatrix} &=
            \begin{bmatrix}
            I_{\alpha} & 0 & 0 \\
            0 & I_{\beta} & 0 \\
            0 & 0 & I_{\gamma}
            \end{bmatrix}
            \begin{bmatrix}
            \ddot{\alpha} \\
            \ddot{\beta} \\
            \ddot{\gamma}
            \end{bmatrix}
            +
            \begin{bmatrix}
            \dot\alpha \\
            \dot\beta \\
            \dot\gamma
            \end{bmatrix}
            \times
            \left(
            \begin{bmatrix}
            I_{\alpha} & 0 & 0 \\
            0 & I_{\beta} & 0 \\
            0 & 0 & I_{\gamma}
            \end{bmatrix}
            \begin{bmatrix}
            \dot\alpha \\
            \dot\beta \\
            \dot\gamma
            \end{bmatrix}
            \right)
            \\
            \begin{bmatrix}
            \ddot\alpha \\
            \ddot\beta \\
            \ddot\gamma
            \end{bmatrix}
            &=
            \begin{bmatrix}
            \frac{\tau_{\alpha} - \dot\gamma\dot\beta(I_{\alpha} - I_{\beta})}{I_{\alpha}} \\
            \frac{\tau_{\beta} - \dot\gamma\dot\alpha(I_{\alpha} - I_{\gamma})}{I_{\beta}} \\
            \frac{\tau_{\gamma} - \dot\alpha\dot\beta(I_{\beta} - I_{\alpha})}{I_{\gamma}}
            \end{bmatrix}
            =
            \begin{bmatrix}
            \frac{L((F_3 + F_4) - (F_2 + F_1)) - \dot\gamma\dot\beta(I_{\alpha} - I_{\beta})}{I_{\alpha}} \\
            \frac{k_m((\omega_1^2 + \omega_3^2) - (\omega_2^2 + \omega_4^2))  - \dot\gamma\dot\alpha(I_{\alpha} - I_{\gamma})}{I_{\beta}} \\
            \frac{L((F_2 + F_3) - (F_1 + F_4)) - \dot\alpha\dot\beta(I_{\beta} - I_{\alpha})}{I_{\gamma}}
            \end{bmatrix}

          \end{align*}
        \]
      </div>
      <!-- prettier-ignore -->
      <div class="equation">
        \[
          \begin{align*}
          \begin{bmatrix}
            \dot{\theta} \\
            \dot{\phi} \\
            \dot{\psi}
            \end{bmatrix}
            =
            \begin{bmatrix}
            1 & \sin(\theta)\tan(\phi) & \cos(\theta)\tan(\phi) \\
            0 & \cos(\theta) & -\sin(\theta) \\
            0 & \sin(\theta)/\cos(\phi) & \cos(\theta)/\cos(\phi)
            \end{bmatrix}
            \begin{bmatrix}
            \dot\alpha \\
            \dot\beta \\
            \dot\gamma
            \end{bmatrix}
          \end{align*}
        \]
      </div>
    </section>

    <h5 class="references">References</h5>
    <div class="references">
      <cite id="euler1768">
        Euler, L. (1770). Institutiones calculi integralis
      </cite>
      <cite id="newton1687">
        Newton, I. (1687). Philosopsiæ Naturalis Principia Mathematica
      </cite>
      <cite id="archimedes250bc">
        Archimedes (ca. 250 BC). Περὶ ἐπιπέδων ἰσορροπιῶν
      </cite>
      <cite id="euclid300bc"> Euclid (ca. 300 BC). Στοιχεῖα</cite>
    </div>
  </body>
</html>
